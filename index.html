<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Notch by stevenrowlands</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Notch</h1>
      <h2 class="project-tagline">Advanced eclipse code templates, commands and extensions via groovy scripts</h2>
      <a href="https://github.com/stevenrowlands/notch" class="btn">View on GitHub</a>
      <a href="https://github.com/stevenrowlands/notch/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/stevenrowlands/notch/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="notch" class="anchor" href="#notch" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Notch</h1>

<p>Notch is a plugin for eclipse that extends the IDE with groovy scripts.</p>

<p>See <a href="https://github.com/stevenrowlands/notch-scripts">notch-scripts</a> repository for some examples</p>

<h2>
<a id="eclipse-templates-with-the-power-of-groovy" class="anchor" href="#eclipse-templates-with-the-power-of-groovy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Eclipse Templates with the Power of Groovy</h2>

<p>notch extends the eclipse code template feature with the ability to run groovy code after the template is run. Take a look at these examples</p>

<h3>
<a id="method-generation" class="anchor" href="#method-generation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Method Generation</h3>

<p>Template a standard private java field. Once the template is finished the getter and setter methods are automatically added to the end of your class. Notice the template variables are available for reference in the groovy closure allowing for programmatic manipulation of the values the user entered</p>

<pre><code>    java.template("private \${Type} \${var};", {
        java.addMethod("public void set" + var.substring(0,1).toUpperCase() + var.substring(1) + "(" + Type + " " + var +") { this." + var + "=" + var + "; }")
        java.addMethod("public " + Type + " get" + var.substring(0,1).toUpperCase() + var.substring(1) + "() { return this." + var + ";}")
    });
</code></pre>

<h3>
<a id="field-generation" class="anchor" href="#field-generation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Field Generation</h3>

<p>This template adds a standard slf4j logger statement. If the logger field isn't available, the field is automatically generated at the top of your class. If the field is already there then just the template is invoked.</p>

<pre><code>    java.addImport("org.slf4j.Logger");
    java.addImport("org.slf4j.LoggerFactory");
    java.addFieldFirst("private static final Logger LOGGER = LoggerFactory.getLogger(" + java.className +");");
    java.template("LOGGER.info(\"\${msg}\");\${cursor}");
</code></pre>

<h3>
<a id="nest-templates" class="anchor" href="#nest-templates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Nest Templates</h3>

<p>This template is just for the field type and then automatically infers the variable name (similar to eclipse proposals). Just enter the type name and the variable name will get automatically generated. template calls can be nested.</p>

<pre><code>    java.template("\${Type} \${cursor}", {
        java.template(Type.toLowerCase() + "= new " + Type + "(\${arg1});");
    })
</code></pre>

<h2>
<a id="auto-expansion" class="anchor" href="#auto-expansion" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Auto Expansion</h2>

<p>Auto expand previous text </p>

<p>Consider this junit example. User has entered</p>

<pre><code>    String a;
    String b;
</code></pre>

<p>They add</p>

<pre><code>    String a;
    String b;
    a &gt; b
</code></pre>

<p>Then do CTRL+ENTER (or other hotkey) at the end of the line. The code gets automatically expanded to (with imports)</p>

<pre><code>    String a;
    String b;
    assertThat(a, greaterThan(b));
</code></pre>

<p>All with the following script (shortened to just &gt; and = for brevity)</p>

<pre><code>    def line = text.getPrecedingLineText();

    String [] macros = line.split(" ");
    if (macros.length == 3) {
        String operator;
        java.addStaticImport("org.junit.Assert.assertThat");
        text.removePrecedingLineText();
        if (macros[1] == "=") {
            java.addStaticImport("org.hamcrest.CoreMatchers.equalTo");
            java.template("assertThat(" + macros[0] + ",equalTo(" + macros[2] + "));");
        } else if (macros[1] == "&gt;") {
            java.addStaticImport("org.hamcrest.Matchers.greaterThan");
            java.template("assertThat(" + macros[0] + ",greaterThan(" + macros[2] + "));\${cursor}");
        }
    }
</code></pre>

<h3>
<a id="test-generation-and-quick-switch" class="anchor" href="#test-generation-and-quick-switch" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Test Generation and Quick Switch</h3>

<p>This example generates a test class automatically for the currently selected java class and opens it. If a test already exists, then it is simply opened. Running the script from the test class will shift focus back to the class under test.</p>

<pre><code>    String packageName = java.packageName;
    String content =  "package " + packageName + ";"
    String className = java.name + "Test";
    if (java.name.contains("Test")) {
        javaproject.addFile(java.relativeName.replace("test","src").replace("Test.java", ".java"),content);
        return;
    }

    content = content + "\n" + "public class " + className + "{\n}";
    javaproject.addFile(java.relativeName.replace("src","test").replace(".java", "Test.java"),content);

    java.addImport("org.junit.Test");
</code></pre>

<h2>
<a id="hotkeys" class="anchor" href="#hotkeys" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Hotkeys</h2>

<p>All commands/templates can be registered to hotkeys allowing for quick access.</p>

<h2>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>API</h2>

<h3>
<a id="text-binding" class="anchor" href="#text-binding" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Text Binding</h3>

<pre><code>    /**
     * Adds text and then positions the cursor at the end of the text
     * 
     * @param text to insert
     */
    void addText(String text);

    /**
     * @return the text preceding the current cursor position
     */
    String getPrecedingLineText();

    /**
     * Removes and returns the preceding line of text. Cursor will be positioned at the indentation of the line
     * 
     * @return the preceding line text that was removed
     */
    String removePrecedingLineText();
</code></pre>

<h3>
<a id="java-binding" class="anchor" href="#java-binding" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Java Binding</h3>

<p>The following api can be used with the 'java' binding. e.g. java.addImport("some.Example")</p>

<pre><code>    /**
     * Adds an import to a java class
     * @param import the fully qualified class name to add as an import
     * @return the eclipse import declaration that was created
     */
    void addImport(String contents);

    /**
     * Adds a constructor to a java class. The constructor is automatically added
     * at the top of the class after any fields and before any methods are defined
     * 
     * @param constructor the full java code that defines the constructor
     * @return the eclipse method that was created
     */
    void addConstructor(String contents);


    /**
     * Adds a method to a java class. The method is automatically added
     * at the bottom of the class
     * 
     * @param constructor the full java code that defines the method
     * @return the eclipse method that was created
     */
    void addMethod(String contents);



    /**
     * Adds a method to a java class. The method is automatically added
     * at the top of the class
     * 
     * @param constructor the full java code that defines the method
     * @return the eclipse method that was created
     */
    void addFieldFirst(String contents);


    /**
     * Adds a method to a java class. The method is automatically added
     * at the bottom of the class
     * 
     * @param constructor the full java code that defines the method
     * @return the eclipse method that was created
     */
    void addFieldLast(String contents);


    /**
     * Creates a template and runs the closure at completion.
     * 
     * @param template the eclipse template
     * @param closure the closure to run after the template is finished
     */
    void template(String template, Closure closure);
    void template(String template);
  }
</code></pre>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Started</h2>

<p>Install from the <a href="https://stevenrowlands.github.io/notch/neon">Neon</a> update site
OR
Install from the <a href="https://stevenrowlands.github.io/notch/mars">Mars</a> update site</p>

<p>Clone the <a href="https://github.com/stevenrowlands/notch-scripts">notch-scripts</a> repository for some examples</p>

<p>Configure the 'Notch' preference page to point at the scripts</p>

<p>Add your hotkeys (all commands are listed as their filename) and you are ready to go.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/stevenrowlands/notch">Notch</a> is maintained by <a href="https://github.com/stevenrowlands">stevenrowlands</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
